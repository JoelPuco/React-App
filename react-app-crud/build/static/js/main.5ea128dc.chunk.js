(this["webpackJsonpreact-app-crud"]=this["webpackJsonpreact-app-crud"]||[]).push([[0],{18:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(10),s=n.n(c),o=n(2),u=n(5),i=n(4),l=n(11),d=n(3),j=n.n(d),b=n(6),h="http://127.0.0.1:8000/api",m=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(h,"/usuario"),e.next=3,fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return a=e.sent,r=a.json(),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(b.a)(j.a.mark((function e(){var t,n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(h,"/usuario"),e.next=3,fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,a=n.json(),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(h,"/usuario/").concat(t),e.next=3,fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}});case 3:return a=e.sent,r=a.json(),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(h,"/usuario/").concat(t),e.next=3,fetch(n,{method:"DELETE",headers:{"Content-Type":"application/json"}});case 3:return a=e.sent,r=a.json(),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var a,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("id usuario de ediUser",t),console.log("data de ediUser",n),a="".concat(h,"/usuario/").concat(t),e.next=5,fetch(a,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 5:return r=e.sent,c=r.json(),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=n(0),g=Object(a.createContext)({}),_=function(e){var t=e.children,n=Object(a.useState)([]),r=Object(o.a)(n,2),c=r[0],s=r[1],u=Object(a.useState)(!1),i=Object(o.a)(u,2),d=i[0],j=i[1],b=Object(a.useState)(!0),h=Object(o.a)(b,2),m=h[0],f=h[1];return Object(a.useEffect)((function(){O().then((function(e){var t=e.reverse();s(Object(l.a)(t)),setTimeout((function(){f(!1)}),1500)}))}),[d]),Object(v.jsx)(g.Provider,{value:{setState:j,state:d,users:c,isLoading:m},children:t})},N=function(e){var t=e.setModalEditUser,n=e.modalEditUser,r=e.userSelect,c=e.setUserSelect,s=Object(a.useContext)(g),l=s.state,d=s.setState,j=Object(a.useState)({}),b=Object(o.a)(j,2),h=b[0],m=b[1],O=Object(a.useState)(!0),p=Object(o.a)(O,2),_=p[0],N=p[1];Object(a.useEffect)((function(){0!==r&&f(r).then((function(e){m(Object(i.a)({},e)),setTimeout((function(){N(!1)}),1e3)}))}),[r]);var C=function(e,t){var n=e.target.value;m(Object(i.a)(Object(i.a)({},h),{},Object(u.a)({},t,n)))};return Object(v.jsx)("div",{hidden:!n,children:Object(v.jsx)("div",{className:"modal-background",children:Object(v.jsxs)("div",{className:"modal-card",children:[Object(v.jsx)("button",{className:"btn btn-dark",style:{position:"absolute",right:10,top:10},onClick:function(){return t(!1),m({}),N(!0),void c(0)},children:"X"}),Object(v.jsxs)("div",{className:"m-4",children:[Object(v.jsx)("h5",{children:"Editar campos del usuario"}),_?Object(v.jsx)("h6",{className:"animate__animated animate__pulse",children:"Cargando datos de usuario..."}):Object(v.jsxs)("form",{className:"mt-4",children:[Object(v.jsx)("input",{className:"form-control mt-1",placeholder:"Nombre",value:h.nombre_usuario,onChange:function(e){return C(e,"nombre_usuario")}}),Object(v.jsx)("input",{className:"form-control mt-1",placeholder:"Cedula",value:h.cedula_usuario,onChange:function(e){return C(e,"cedula_usuario")}}),Object(v.jsx)("input",{className:"form-control mt-1",placeholder:"Telefono",value:h.telefono_usuario,onChange:function(e){return C(e,"telefono_usuario")}}),Object(v.jsx)("input",{className:"form-control mt-1",placeholder:"Email",value:h.mail_usuario,onChange:function(e){return C(e,"mail_usuario")}}),Object(v.jsx)("button",{className:"btn btn-success mt-3",onClick:function(e){return function(e){e.preventDefault(),x(r,h).then((function(e){m({}),t(!1),N(!0),d(!l),c(0)}))}(e)},children:"Guardar Cambios"})]})]})]})})})},C=function(e){var t=e.setModalUser,n=e.modalUser,r=Object(a.useContext)(g),c=r.state,s=r.setState,l={nombre_usuario:"",cedula_usuario:"",telefono_usuario:"",mail_usuario:""},d=Object(a.useState)(l),j=Object(o.a)(d,2),b=j[0],h=j[1],O=function(e){e.preventDefault(),function(e){return console.log(e),0===e.nombre_usuario.length||0===e.cedula_usuario.length?(alert("Llene todos los campos"),!1):10!==e.cedula_usuario.length?(alert("El numero de cedula debe tener 10 caracteres"),!1):0===e.telefono_usuario.length?(alert("Llene todos los campos"),!1):10!==e.telefono_usuario.length?(alert("El numero de telefono debe tener 10 caracteres"),!1):0!==e.mail_usuario.length||(alert("Llene todos los campos"),!1)}(b)&&m(b).then((function(e){h(l),t(!1),s(!c)}))},f=function(e,t){var n=e.target.value;h(Object(i.a)(Object(i.a)({},b),{},Object(u.a)({},t,n)))};return Object(v.jsx)("div",{hidden:!n,children:Object(v.jsx)("div",{className:"modal-background",children:Object(v.jsxs)("div",{className:"modal-card",children:[Object(v.jsx)("button",{className:"btn btn-dark",style:{position:"absolute",right:10,top:10},onClick:function(){return t(!1),void h(l)},children:"X"}),Object(v.jsxs)("div",{className:"m-4",children:[Object(v.jsx)("h5",{children:"Datos del nuevo usuario"}),Object(v.jsxs)("form",{className:"mt-4",children:[Object(v.jsx)("input",{className:"form-control mt-1",placeholder:"Nombre",value:b.nombre_usuario,onChange:function(e){return f(e,"nombre_usuario")}}),Object(v.jsx)("input",{className:"form-control mt-1",placeholder:"Cedula",value:b.cedula_usuario,onChange:function(e){return f(e,"cedula_usuario")}}),Object(v.jsx)("input",{className:"form-control mt-1",placeholder:"Telefono",value:b.telefono_usuario,onChange:function(e){return f(e,"telefono_usuario")}}),Object(v.jsx)("input",{className:"form-control mt-1",placeholder:"Email",value:b.mail_usuario,onChange:function(e){return f(e,"mail_usuario")}}),Object(v.jsx)("button",{className:"btn btn-success mt-3",onClick:function(e){return O(e)},children:" Registrar "})]})]})]})})})},S=function(e){var t=e.handleEditModalOpen,n=Object(a.useContext)(g),r=n.users,c=n.setState,s=n.state,u=n.isLoading,i=Object(a.useState)(0),l=Object(o.a)(i,2),d=l[0],j=l[1];return Object(v.jsxs)("div",{className:"table-responsive-lg",children:[Object(v.jsxs)("table",{className:"table table-hover",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"ID"}),Object(v.jsx)("th",{children:"Nombre"}),Object(v.jsx)("th",{children:"Cedula"}),Object(v.jsx)("th",{children:"Telefono"}),Object(v.jsx)("th",{children:"E-mail"}),Object(v.jsx)("th",{children:"Acciones"})]})}),Object(v.jsx)("tbody",{children:u?Object(v.jsx)("h6",{className:"animate__animated animate__fadeInDown",children:" Cargando... "}):r.slice(d,d+4).map((function(e){return Object(v.jsxs)("tr",{className:"animate__animated animate__fadeIn",children:[Object(v.jsx)("td",{children:e.id_usuario}),Object(v.jsx)("td",{children:e.nombre_usuario}),Object(v.jsx)("td",{children:e.cedula_usuario}),Object(v.jsx)("td",{children:e.telefono_usuario}),Object(v.jsx)("td",{children:e.mail_usuario}),Object(v.jsxs)("td",{children:[Object(v.jsx)("button",{type:"button",className:"btn btn-warning mr-1",onClick:function(){return t(e)},children:"Editar"}),Object(v.jsx)("button",{type:"button",className:"btn btn-danger",onClick:function(){return function(e){console.log(e),window.confirm("\xbfSeguro que quiere eliminar este usuario ? \n ".concat(e.id_usuario," - ").concat(e.nombre_usuario," - ").concat(e.cedula_usuario))&&(p(e.id_usuario),c(!s))}(e)},children:"Eliminar"})]})]},e.id_usuario)}))})]}),!u&&r.length>4&&Object(v.jsxs)("div",{className:"btn-pagination",children:[Object(v.jsx)("button",{className:"btn btn-outline-primary mr-2",onClick:function(){d>0&&j(d-4)},children:"Anterior"}),Object(v.jsx)("button",{className:"btn btn-outline-primary mr-2",onClick:function(){r.length>d+4&&j(d+4)},children:"Siguiente"}),Object(v.jsxs)("h6",{children:[d," - ",r.length>d+4?d+4:r.length," / ",r.length]})]})]})};var y=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),s=Object(o.a)(c,2),u=s[0],i=s[1],l=Object(a.useState)(0),d=Object(o.a)(l,2),j=d[0],b=d[1];return Object(v.jsx)("div",{className:"m-3",children:Object(v.jsxs)("div",{className:"card card-body border-info",style:{boxShadow:"1px 2px 7px #121212"},children:[Object(v.jsx)("h4",{children:"Usuarios"}),Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{className:"btn btn-primary mt-2 mb-2 btn-add-user",onClick:function(){r(!0)},children:"Agregar Usuario"}),Object(v.jsx)(C,{setModalUser:r,modalUser:n})]}),Object(v.jsx)(S,{handleEditModalOpen:function(e){i(!0),b(e.id_usuario)},userSelect:j,setUserSelect:b}),Object(v.jsx)(N,{modalEditUser:u,setModalEditUser:i,userSelect:j,setUserSelect:b})]})})};var E=function(){return Object(v.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-info",children:Object(v.jsx)("h2",{children:"React CRUD"})})};n(18);function k(){return Object(v.jsxs)("div",{className:"app",children:[Object(v.jsx)(E,{}),Object(v.jsx)(_,{children:Object(v.jsx)(y,{})}),Object(v.jsx)("div",{className:"footer",children:Object(v.jsx)("h6",{children:"Desarrollado por Joel Puco"})})]})}var w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,20)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};s.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(k,{})}),document.getElementById("root")),w()}},[[19,1,2]]]);
//# sourceMappingURL=main.5ea128dc.chunk.js.map